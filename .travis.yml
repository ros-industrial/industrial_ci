# This .travis.yml works to check "this" repository, namely `industrial_ci`.
# A template for users can be found here: https://github.com/ros-industrial/industrial_ci/blob/master/doc/.travis.yml

# Greatly inspired by JSK travis: https://github.com/jsk-ros-pkg/jsk_travis

services:
  - docker

language: generic

git:
  quiet: true

env:
  matrix:
    - ROS_DISTRO=noetic
    - ROS_DISTRO=noetic PRERELEASE=true

    # Pylint
    - ROS_DISTRO=kinetic TARGET_WORKSPACE="industrial_ci/mockups/test_pylint" PYLINT2_CHECK=true PYLINT2_ARGS="--errors-only" PYLINT_EXCLUDE="test_pylint"
    - ROS_DISTRO=kinetic TARGET_WORKSPACE="industrial_ci/mockups/test_pylint" PYLINT3_CHECK=true PYLINT3_ARGS="--reports=no"
    - ROS_DISTRO=kinetic TARGET_WORKSPACE="industrial_ci/mockups/test_pylint" PYLINT2_CHECK=true PYLINT3_CHECK=true PYLINT_ARGS="--output-format=parseable --errors-only"
    - ROS_DISTRO=kinetic TARGET_WORKSPACE="industrial_ci/mockups/test_pylint" PYLINT2_CHECK=true PYLINT3_CHECK=true PYLINT_ARGS="--reports=no" PYLINT2_ARGS="--output-format=colorized"
    - ROS_DISTRO=kinetic TARGET_WORKSPACE="industrial_ci/mockups/test_pylint" PYLINT2_CHECK=true PYLINT3_CHECK=true PYLINT_ARGS="--reports=no" PYLINT2_ARGS="--output-format=colorized" PYLINT3_ARGS="--output-format=parseable"
    - ROS_DISTRO=kinetic TARGET_WORKSPACE="industrial_ci/mockups/test_pylint" PYLINT2_CHECK=true PYLINT2_ARGS="--rcfile=/root/src/industrial_ci/.travis.pylintrc"
    #- ROS_DISTRO=kinetic TARGET_WORKSPACE="industrial_ci/mockups/test_pylint" PYLINT=true PYLINT_VERSIONS="pylint pylint3" PYLINT_ARGS="--disable=C0103,C0111"
    #- ROS_DISTRO=kinetic TARGET_WORKSPACE="industrial_ci/mockups/test_pylint" PYLINT=true PYLINT_VERSIONS="pylint pylint3" PYLINT_ARGS="--output-format=parseable --reports=no"

matrix:
  include:
    - env:
      - ROS_DISTRO=noetic ISOLATION=shell
      os: linux
      dist: focal
      language: cpp

script:
  - ./travis.sh
